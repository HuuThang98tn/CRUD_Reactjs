{"ast":null,"code":"import _slicedToArray from\"C:/Users/Huu Thang/Desktop/New folder/EmployeePortal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import\"../styles/Styles.css\";import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ScreenLogin=function ScreenLogin(){var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errorMessages=_useState2[0],setErrorMessages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitted=_useState4[0],setIsSubmitted=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(localStorage.getItem(localStorage.getItem(\"authenticated\"))),_useState10=_slicedToArray(_useState9,2),authenticated=_useState10[0],setauthenticated=_useState10[1];var errors={uname:\"Sai email đăng nhập\",pass:\"Sai password đăng nhập\"};var handleSubmit=function handleSubmit(event){event.preventDefault();var data=JSON.stringify({\"email\":email,\"password\":password});var config={method:'post',url:'http://localhost:3000/api-v1/users/login',headers:{'Content-Type':'application/json'},data:data};axios(config).then(function(response){// console.log(JSON.stringify(response.data.result[0].accesstoken));\nif(response.data.code===200){setIsSubmitted(true);var accesstoken=response.data.result[0].accesstoken;// setauthenticated(accesstoken)\nlocalStorage.setItem(\"authenticated\",response.data.result[0].accesstoken);navigate(\"/todolist\");}}).catch(function(error){alert(\"Đã có lỗi xảy ra\");setIsSubmitted(false);});};var renderErrorMessage=function renderErrorMessage(name){return name===errorMessages.name&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMessages.message});};var renderForm=/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\xE0i kho\\u1EA3n \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setEmail(e.target.value);},required:true}),renderErrorMessage(\"uname\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pass\",onChange:function onChange(e){return setPassword(e.target.value);},required:true}),renderErrorMessage(\"pass\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})})]})});return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\u0110\\u0103ng nh\\u1EADp\"}),isSubmitted?/*#__PURE__*/_jsx(\"div\",{children:\"User is successfully logged in\"}):renderForm]})});};export default ScreenLogin;","map":{"version":3,"names":["React","useState","axios","Link","useNavigate","ScreenLogin","navigate","errorMessages","setErrorMessages","isSubmitted","setIsSubmitted","email","setEmail","password","setPassword","localStorage","getItem","authenticated","setauthenticated","errors","uname","pass","handleSubmit","event","preventDefault","data","JSON","stringify","config","method","url","headers","then","response","code","accesstoken","result","setItem","catch","error","alert","renderErrorMessage","name","message","renderForm","e","target","value"],"sources":["C:/Users/Huu Thang/Desktop/New folder/EmployeePortal/src/Screen/ScreenLogin.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport \"../styles/Styles.css\"\r\nimport axios from 'axios'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nconst ScreenLogin = () => {\r\n    const navigate = useNavigate();\r\n    const [errorMessages, setErrorMessages] = useState({});\r\n    const [isSubmitted, setIsSubmitted] = useState(false);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const [authenticated, setauthenticated] = useState(\r\n        localStorage.getItem(localStorage.getItem(\"authenticated\"))\r\n    );\r\n    const errors = {\r\n        uname: \"Sai email đăng nhập\",\r\n        pass: \"Sai password đăng nhập\"\r\n    };\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        var data = JSON.stringify({\r\n            \"email\": email,\r\n            \"password\": password\r\n        });\r\n\r\n        var config = {\r\n            method: 'post',\r\n            url: 'http://localhost:3000/api-v1/users/login',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            data: data\r\n        };\r\n\r\n        axios(config)\r\n            .then(function (response) {\r\n                // console.log(JSON.stringify(response.data.result[0].accesstoken));\r\n                if (response.data.code === 200) {\r\n                    setIsSubmitted(true);\r\n                    const accesstoken = response.data.result[0].accesstoken\r\n                    // setauthenticated(accesstoken)\r\n                    localStorage.setItem(\"authenticated\", response.data.result[0].accesstoken);\r\n                    navigate(\"/todolist\");\r\n\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                alert(\"Đã có lỗi xảy ra\")\r\n                setIsSubmitted(false);\r\n            });\r\n    }\r\n    const renderErrorMessage = (name) =>\r\n        name === errorMessages.name && (\r\n            <div className=\"error\">{errorMessages.message}</div>\r\n        );\r\n\r\n\r\n    const renderForm = (\r\n        <div className=\"form\">\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"input-container\">\r\n                    <label>Tài khoản </label>\r\n                    <input type=\"text\" onChange={(e) => setEmail(e.target.value)} required />\r\n                    {renderErrorMessage(\"uname\")}\r\n                </div>\r\n                <div className=\"input-container\">\r\n                    <label>Mật khẩu </label>\r\n                    <input type=\"password\" name=\"pass\" onChange={(e) => setPassword(e.target.value)} required />\r\n                    {renderErrorMessage(\"pass\")}\r\n                </div>\r\n                <div className=\"button-container\">\r\n                    <input type=\"submit\"\r\n                    />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n    return (\r\n        <div className=\"app\">\r\n            <div className=\"login-form\">\r\n                <div className=\"title\">Đăng nhập</div>\r\n                {isSubmitted ? <div>User is successfully logged in</div> : renderForm}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ScreenLogin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}